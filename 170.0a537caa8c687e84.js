"use strict";(self.webpackChunkdemo_app=self.webpackChunkdemo_app||[]).push([[170],{170:(K,c,h)=>{h.r(c),h.d(c,{KtdMultiItemHandlerComponent:()=>S});var g=h(7048),y=h(9700),m=h(8804),l=h(6814),u=h(5986),f=h(9046),M=h(2032),p=h(3680),x=h(421),C=h(2296);function _(){const r=window.navigator.userAgent.toLowerCase();return/(macintosh|macintel|macppc|mac68k|macos)/i.test(r)?"macos":/(iphone|ipad|ipod)/i.test(r)?"ios":/(win32|win64|windows|wince)/i.test(r)?"windows":/android/.test(r)?"android":/linux/.test(r)?"linux":null}var a=h(9016),I=h(7354),v=h(7734),T=h(6776),P=h(6223),k=h(5635),t=h(5879);const O=function(r){return{"grid-item-content--selected":r}};function b(r,w){if(1&r){const i=t.EpF();t.TgZ(0,"ktd-grid-item",13),t.NdJ("pointerdown",function(e){const n=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.pointerDownItemSelection(e,n))})("pointerup",function(e){const n=t.CHM(i).$implicit,s=t.oxw();return t.KtG(s.pointerUpItemSelection(e,n))}),t.TgZ(1,"div",14),t._uU(2),t.qZA(),t.TgZ(3,"div",15),t.NdJ("mousedown",function(e){t.CHM(i);const o=t.oxw();return t.KtG(o.stopEventPropagation(e))})("click",function(){const o=t.CHM(i).$implicit,n=t.oxw();return t.KtG(n.removeItem(o.id))}),t.qZA()()}if(2&r){const i=w.$implicit,d=t.oxw();t.Q6J("id",i.id),t.xp6(1),t.Q6J("ngClass",t.VKq(3,O,d.isItemSelected(i))),t.xp6(1),t.hij(" ",i.id," ")}}const Z=function(){return{show:"always",borderColor:"rgba(255, 128, 0, 0.25)",gapColor:"transparent",borderWidth:1,rowColor:"rgba(128, 128, 128, 0.10)",columnColor:"rgba(128, 128, 128, 0.10)"}},z=[{id:"1",x:1,y:0,w:61,h:1},{id:"2",x:1,y:1,w:15,h:1},{id:"3",x:16,y:1,w:15,h:1},{id:"4",x:31,y:1,w:15,h:1},{id:"5",x:46,y:1,w:15,h:1},{id:"6",x:1,y:2,w:8,h:3},{id:"7",x:9,y:2,w:7,h:3},{id:"8",x:16,y:2,w:8,h:3},{id:"9",x:24,y:2,w:7,h:3},{id:"10",x:31,y:2,w:8,h:3},{id:"11",x:39,y:2,w:7,h:3},{id:"12",x:46,y:2,w:8,h:3},{id:"13",x:54,y:2,w:7,h:3},{id:"14",x:1,y:5,w:15,h:1},{id:"15",x:16,y:5,w:15,h:1},{id:"16",x:31,y:5,w:15,h:1},{id:"17",x:46,y:5,w:15,h:1},{id:"18",x:1,y:6,w:8,h:3},{id:"19",x:9,y:6,w:7,h:3},{id:"20",x:16,y:6,w:8,h:3},{id:"21",x:24,y:6,w:7,h:3},{id:"22",x:31,y:6,w:8,h:3},{id:"23",x:39,y:6,w:7,h:3},{id:"24",x:46,y:6,w:8,h:3},{id:"25",x:54,y:6,w:7,h:3},{id:"26",x:1,y:9,w:60,h:1},{id:"27",x:1,y:10,w:15,h:1},{id:"28",x:16,y:10,w:15,h:1},{id:"29",x:31,y:10,w:15,h:1},{id:"30",x:46,y:10,w:15,h:1},{id:"31",x:1,y:11,w:8,h:3},{id:"32",x:9,y:11,w:7,h:3},{id:"33",x:16,y:11,w:8,h:3},{id:"34",x:24,y:11,w:7,h:3},{id:"35",x:31,y:11,w:8,h:3},{id:"36",x:39,y:11,w:7,h:3},{id:"37",x:46,y:11,w:8,h:3},{id:"38",x:54,y:11,w:7,h:3},{id:"39",x:1,y:14,w:15,h:1},{id:"40",x:16,y:14,w:15,h:1},{id:"41",x:31,y:14,w:15,h:1},{id:"42",x:46,y:14,w:15,h:1},{id:"43",x:1,y:15,w:8,h:3},{id:"44",x:9,y:15,w:7,h:3},{id:"45",x:16,y:15,w:8,h:3},{id:"46",x:24,y:15,w:7,h:3},{id:"47",x:31,y:15,w:8,h:3},{id:"48",x:39,y:15,w:7,h:3},{id:"49",x:46,y:15,w:8,h:3},{id:"50",x:54,y:15,w:7,h:3},{id:"51",x:0,y:18,w:62,h:1},{id:"52",x:0,y:19,w:12,h:1},{id:"53",x:12,y:19,w:50,h:9},{id:"54",x:0,y:20,w:12,h:2},{id:"55",x:0,y:22,w:6,h:4},{id:"56",x:6,y:22,w:6,h:4},{id:"57",x:0,y:26,w:12,h:2}];let S=(()=>{class r{constructor(i,d,e){this.ngZone=i,this.elementRef=d,this.document=e,this.trackById=y.Yy,this.cols=62,this.rowHeight=32,this.compactType="vertical",this.preventCollision=!1,this.selectedItems=[],this.layout=z,this._isDraggingResizing=!1,(0,a.R)(e,"keydown").pipe((0,v.h)(o=>{const n=o.ctrlKey&&"v"===o.key.toLowerCase(),s=o.metaKey&&"v"===o.key.toLowerCase();return n||s})).subscribe(()=>{this.duplicateSelectedElements()})}ngOnInit(){this.resizeSubscription=(0,I.T)((0,a.R)(window,"resize"),(0,a.R)(window,"orientationchange")).pipe((0,T.b)(50)).subscribe(()=>{this.grid.resize()}),(0,k.V)("view_multi_item_drag_and_resize")}ngOnDestroy(){this.resizeSubscription.unsubscribe()}onDragStarted(i){this._isDraggingResizing=!0,console.log("onDragStarted",i)}onDragEnded(i){this._isDraggingResizing=!1,console.log("onDragEnded",i)}onResizeStarted(i){this._isDraggingResizing=!0,console.log("onResizeStarted",i)}onResizeEnded(i){this._isDraggingResizing=!1,console.log("onResizeEnded",i)}onCompactTypeChange(i){console.log("onCompactTypeChange",i),this.compactType=i.value}onPreventCollisionChange(i){console.log("onPreventCollisionChange",i),this.preventCollision=i}onLayoutUpdated(i){console.log("onLayoutUpdated",i),this.layout=i}generateLayout(){const i=[];for(let d=0;d<this.cols;d++){const e=Math.ceil(4*Math.random())+1,o=10;i.push({x:Math.round(Math.random()*Math.floor(this.cols/o-1))*o,y:Math.floor(d/6)*e,w:o,h:e,id:d.toString()})}this.layout=(0,y.zk)(i,this.compactType,this.cols),console.log("generateLayout",this.layout)}addItemToLayout(i){let d=i;d||(d={id:(this.layout.reduce((n,s)=>Math.max(n,parseInt(s.id,10)),-1)+1).toString(),x:-1,y:-1,w:2,h:2}),this.layout=[d,...this.layout],this.layout=(0,y.zk)(this.layout,this.compactType,this.cols),console.log("addItemToLayout",d)}stopEventPropagation(i){i.preventDefault(),i.stopPropagation()}removeItem(i){this.selectedItems=[],this.layout=(0,m.I)(this.layout,d=>d.id===i)}isItemSelected(i){return this.selectedItems.includes(i.id)}pointerDownItemSelection(i,d){("macos"==_()?i.metaKey:i.ctrlKey)||this.selectedItems.includes(d.id)||(this.selectedItems=2==i.button?[]:[d.id])}pointerUpItemSelection(i,d){const e="macos"==_()?i.metaKey:i.ctrlKey;if(2!==i.button){const o=this.selectedItems.includes(d.id);e?o?this._isDraggingResizing||(this.selectedItems=(0,m.I)(this.selectedItems,n=>n===d.id)):this.selectedItems=[...this.selectedItems,d.id]:!this._isDraggingResizing&&o&&(this.selectedItems=[d.id])}}duplicateSelectedElements(){let d=this.layout.reduce((n,s)=>Math.max(n,parseInt(s.id,10)),-1);const e=this.selectedItems.length>0?this.layout.find(n=>n.id===this.selectedItems[this.selectedItems.length-1]).y:0;(0,y.jz)(this.selectedItems.map(n=>this.layout.find(s=>s.id===n)),this.compactType).reverse().forEach(n=>{d++;const s={id:d.toString(),w:n.w,h:n.h,x:n.x,y:e+.5};this.addItemToLayout(s)}),console.log("duplicateSelectedElements",this.selectedItems)}static#t=this.\u0275fac=function(d){return new(d||r)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(l.K0))};static#i=this.\u0275cmp=t.Xpm({type:r,selectors:[["ktd-multi-item-handler"]],viewQuery:function(d,e){if(1&d&&t.Gf(y.Vh,7),2&d){let o;t.iGM(o=t.CRH())&&(e.grid=o.first)}},standalone:!0,features:[t.jDz],decls:44,vars:18,consts:[[1,"container"],[1,"header-container"],[1,"header-container__usage-guide"],[1,"header-container__controls"],[1,"controls-content"],["mat-raised-button","",3,"click"],["color","accent",2,"width","150px"],[3,"value","selectionChange"],[3,"value"],["color","accent",3,"checked","change"],[1,"grid-container"],[3,"cols","backgroundConfig","rowHeight","layout","compactType","preventCollision","gap","scrollableParent","scrollSpeed","selectedItemsIds","dragStarted","resizeStarted","dragEnded","resizeEnded","layoutUpdated"],[3,"id","pointerdown","pointerup",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","pointerdown","pointerup"],[1,"grid-item-content",3,"ngClass"],[1,"grid-item-remove-handle",3,"mousedown","click"]],template:function(d,e){1&d&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),t._uU(4,"USAGE GUIDE"),t.qZA(),t.TgZ(5,"ul")(6,"li"),t._uU(7,"Click on a grid item to select it"),t.qZA(),t.TgZ(8,"li"),t._uU(9,"Ctrl (or \u2318 on Mac) + Click to add or remove an item from the group"),t.qZA(),t.TgZ(10,"li"),t._uU(11,"Drag/resize any item in the group to apply the action to all selected items"),t.qZA(),t.TgZ(12,"li"),t._uU(13,"Drag/resize an item outside the group to move it individually without clearing the current selection"),t.qZA(),t.TgZ(14,"li"),t._uU(15,"While a group of elements is selected, you can paste it below the last element with Ctrl(or \u2318 on Mac) + V."),t.qZA(),t.TgZ(16,"li"),t._uU(17,"Click on an item outside the group to start a new selection"),t.qZA()()(),t.TgZ(18,"div",3)(19,"p"),t._uU(20,"GRID CONTROLS"),t.qZA(),t.TgZ(21,"div",4)(22,"button",5),t.NdJ("click",function(){return e.generateLayout()}),t._uU(23," Generate layout "),t.qZA(),t.TgZ(24,"button",5),t.NdJ("click",function(){return e.addItemToLayout()}),t._uU(25,"Add item"),t.qZA(),t.TgZ(26,"mat-form-field",6)(27,"mat-label"),t._uU(28,"Compact type"),t.qZA(),t.TgZ(29,"mat-select",7),t.NdJ("selectionChange",function(n){return e.onCompactTypeChange(n)}),t.TgZ(30,"mat-option",8),t._uU(31,"vertical"),t.qZA(),t.TgZ(32,"mat-option",8),t._uU(33,"horizontal"),t.qZA(),t.TgZ(34,"mat-option",8),t._uU(35,"-"),t.qZA()()(),t.TgZ(36,"mat-checkbox",9),t.NdJ("change",function(n){return e.onPreventCollisionChange(n.checked)}),t._uU(37," Prevent Collision "),t.qZA()()()(),t.TgZ(38,"p"),t._uU(39,"GRID"),t.qZA(),t.TgZ(40,"div",10)(41,"ktd-grid",11),t.NdJ("dragStarted",function(n){return e.onDragStarted(n)})("resizeStarted",function(n){return e.onResizeStarted(n)})("dragEnded",function(n){return e.onDragEnded(n)})("resizeEnded",function(n){return e.onResizeEnded(n)})("layoutUpdated",function(n){return e.onLayoutUpdated(n)}),t.YNc(42,b,4,5,"ktd-grid-item",12),t.qZA()()(),t._UZ(43,"ktd-footer")),2&d&&(t.xp6(29),t.Q6J("value",e.compactType),t.xp6(1),t.Q6J("value","vertical"),t.xp6(2),t.Q6J("value","horizontal"),t.xp6(2),t.Q6J("value",null),t.xp6(2),t.Q6J("checked",e.preventCollision),t.xp6(5),t.Q6J("cols",e.cols)("backgroundConfig",t.DdM(17,Z))("rowHeight",e.rowHeight)("layout",e.layout)("compactType",e.compactType)("preventCollision",e.preventCollision)("gap",10)("scrollableParent",e.document)("scrollSpeed",4)("selectedItemsIds",e.selectedItems),t.xp6(1),t.Q6J("ngForOf",e.layout)("ngForTrackBy",e.trackById))},dependencies:[C.ot,C.lW,x.lN,x.KE,x.hX,P.UX,g.LD,g.gD,p.ey,p.Ng,M.c,u.p9,u.oG,l.ax,l.mk,y.Vh,y.Mc,f.f],styles:['[_nghost-%COMP%]{display:block;width:100%;padding:48px 32px;box-sizing:border-box}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;gap:40px;margin-bottom:40px}[_nghost-%COMP%]   .header-container__usage-guide[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;margin-bottom:4px}[_nghost-%COMP%]   .header-container__controls[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .header-container__controls[_ngcontent-%COMP%]   .controls-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}[_nghost-%COMP%]   .header-container__controls[_ngcontent-%COMP%]   .controls-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:8px 24px 8px 0}[_nghost-%COMP%]   .grid-container[_ngcontent-%COMP%]{padding:4px;box-sizing:border-box;border:1px solid var(--ktd-border-color);background-color:var(--ktd-background-color);border-radius:2px}[_nghost-%COMP%]   ktd-grid-item[_ngcontent-%COMP%]{color:#121212;cursor:grab}[_nghost-%COMP%]   ktd-grid-item.ktd-grid-item-dragging[_ngcontent-%COMP%]{cursor:grabbing}[_nghost-%COMP%]   ktd-grid[_ngcontent-%COMP%]{transition:height .5s ease}[_nghost-%COMP%]   .grid-item-content[_ngcontent-%COMP%]{box-sizing:border-box;background:#ccc;border:1px solid;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .grid-item-content--selected[_ngcontent-%COMP%]{border:3px solid rgb(163,0,0)}[_nghost-%COMP%]   .grid-item-remove-handle[_ngcontent-%COMP%]{position:absolute;cursor:pointer;display:flex;justify-content:center;width:20px;height:20px;top:0;right:0}[_nghost-%COMP%]   .grid-item-remove-handle[_ngcontent-%COMP%]:after{content:"x";color:#121212;font-size:16px;font-weight:300;font-family:Arial,sans-serif}']})}return r})()}}]);